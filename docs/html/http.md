# HTTP

## 什么是 HTTP

超文本传输协议（Hypertext Transfer Protocol，缩写 HTTP）旨在启用客户端和服务器之间的通信。HTTP 充当客户端和服务器之间的请求-响应协议
举例：客户端（浏览器）向服务器发送 HTTP 请求；然后服务器将响应返回客户端。响应包含有关请求的状态信息，也可能包含所请求的内容

## HTML 错误消息

当浏览器向 Web 服务器请求服务时，可能会发生错误，并且服务器可能会返回错误代码，例如 "404 Not Found"

通常这些错误被称为 HTML 错误消息

但是这些消息应称为 HTTP 状态消息。实际上，服务器总会为每个请求返回一条消息。最常见的消息是 200 OK

以下是可能返回的 HTTP 状态消息的列表：

## 1xx 消息

| 消息 |        英文         |   中文   |                                        含义                                        |
|:----:|:-------------------:|:--------:|:----------------------------------------------------------------------------------:|
| 100  |      Continue       |   继续   | 服务器仅接收到部分请求，但是一旦服务器并没有拒绝该请求，客户端应该继续发送其余的请求 |
| 101  | Switching Protocols | 切换协议 |              服务器转换协议：服务器将遵从客户的请求转换到另外一种协议               |

## 2xx 成功

| 消息 |             英文              |   中文   |                                                         含义                                                          |
|:----:|:-----------------------------:|:--------:|:---------------------------------------------------------------------------------------------------------------------:|
| 200  |              OK               |   成功   |                                      请求成功（其后是对GET和POST请求的应答文档。）                                       |
| 201  |            Created            | 创建完成 |                                           请求被创建完成，同时新的资源被创建                                           |
| 202  |           Accepted            | 请求接受 |                                          供处理的请求已被接受，但是处理未完成                                          |
| 203  | Non-authoritative Information | 切换协议 |                           文档已经正常地返回，但一些应答头可能不正确，因为使用的是文档的拷贝                            |
| 204  |          No Content           |  无内容  | 没有新文档。浏览器应该继续显示原来的文档。如果用户定期地刷新页面，而Servlet可以确定用户文档足够新，这个状态代码是很有用的 |
| 205  |         Reset Content         | 重置内容 |                       没有新文档。但浏览器应该重置它所显示的内容。用来强制浏览器清除表单输入内容                        |
| 206  |        Partial Content        | 部分内容 |                                   客户发送了一个带有Range头的GET请求，服务器完成了它                                   |

## 3xx 重定向

| 消息 |       英文        |   中文   |                                                                                  含义                                                                                  |
|:----:|:-----------------:|:--------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| 300  | Multiple Choices  | 多重选择 |                                                    多重选择。链接列表。用户可以选择某链接到达目的地。最多允许五个地址                                                     |
| 301  | Moved Permanently | 永久移动 |                                                                     所请求的页面已经转移至新的url                                                                      |
| 302  |       Found       |   创办   |                                                                   所请求的页面已经临时转移至新的url                                                                    |
| 303  |     See Other     |  看别的  |                                                                    所请求的页面可在别的url下被找到                                                                     |
| 304  |   Not Modified    |  未修改  | 未按预期修改文档。客户端有缓冲的文档并发出了一个条件性的请求（一般是提供If-Modified-Since头表示客户只想比指定日期更新的文档）。服务器告诉客户，原来缓冲的文档还可以继续使用 |
| 305  |     Use Proxy     | 使用代理 |                                                         客户请求的文档应该通过Location头所指明的代理服务器提取                                                         |
| 306  |      Unused       |  未使用  |                                                         此代码被用于前一版本。目前已不再使用，但是代码依然被保留                                                         |
| 307  | Temporary Redirect | 暂时重定向 |                                                                    被请求的页面已经临时移至新的url                                                                     |

## 4xx 客户端错误

| 消息 |              英文               |           中文            |                                              含义                                               |
|:----:|:-------------------------------:|:-------------------------:|:-----------------------------------------------------------------------------------------------:|
| 400  |           Bad Request           |         坏的请求          |                                       服务器未能理解请求                                        |
| 401  |          Unauthorized           |        未经授权的         |                                  被请求的页面需要用户名和密码                                   |
| 402  |        Payment Required         |     此代码尚无法使用      |                                        此代码尚无法使用                                         |
| 403  |            Forbidden            |          被禁止           |                                    对被请求页面的访问被禁止                                     |
| 404  |            Not Found            |          未找到           |                                   服务器无法找到被请求的页面                                    |
| 405  |       Method Not Allowed        |        方法不允许         |                                    请求中指定的方法不被允许                                     |
| 406  |         Not Acceptable          |          未接受           |                               服务器生成的响应无法被客户端所接受                                |
| 407  |  Proxy Authentication Required  |       需要代理认证        |                      用户必须首先使用代理服务器进行验证，这样请求才会被处理                      |
| 408  |         Request Timeout         |         请求超时          |                                   请求超出了服务器的等待时间                                    |
| 409  |            Conflict             |           冲突            |                                     由于冲突，请求无法被完成                                     |
| 410  |              Gone               |        页面不可用         |                                       被请求的页面不可用                                        |
| 411  |         Length Required         | "Content-Length" 未被定义 |                    "Content-Length" 未被定义。如果无此内容，服务器不会接受请求                    |
| 412  |       Precondition Failed       |       前提条件失败        |                               请求中的前提条件被服务器评估为失败                                |
| 413  |    Request Entity Too Large     |       请求实体太大        |                            由于所请求的实体的太大，服务器不会接受请求                            |
| 414  |      Request-url Too Long       |        请求URL太长        | 由于url太长，服务器不会接受请求。当post请求被转换为带有很长的查询信息的get请求时，就会发生这种情况 |
| 415  |     Unsupported Media Type      |      媒体类型不支持       |                             由于媒介类型不被支持，服务器不会接受请求                             |
| 416  | Requested Range Not Satisfiable |     请求范围不能满足      |                             服务器不能满足客户在请求中指定的Range头                             |
| 417  |       Expectation Failed        |         期望失败          |                             服务器不能满足客户在请求中指定的请求头                              |

## 5xx 服务器错误

| 消息 |              英文               |      中文      |                      含义                       |
|:----:|:-------------------------------:|:--------------:|:-----------------------------------------------:|
| 500  |      Internal Server Error      | 服务器内部错误 |       请求未完成。服务器遇到不可预知的情况       |
| 501  |         Not Implemented         |    没有实现    |       请求未完成。服务器不支持所请求的功能       |
| 502  |           Bad Gateway           |    坏的网关    | 请求未完成。服务器从上游服务器收到一个无效的响应 |
| 503  |       Service Unavailable       |   服务不可用   |         请求未完成。服务器临时过载或当机         |
| 504  |         Gateway Timeout         |    网关超时    |                    网关超时                     |
| 505  |   HTTP Version Not Supported    | HTTP版本不支持 |      服务器不支持请求中指明的HTTP协议版本       |
| 511  | Network Authentication Required |  需要网络认证  |     用户需要提供身份验证来获取网络访问入口      |

## HTTP 方法

- GET，用于从指定资源请求数据
- POST，用于将数据发送到服务器来创建/更新资源
- PUT，用于将数据发送到服务器来创建/更新资源，POST 和 PUT 之间的区别在于 PUT 请求是幂等的（idempotent）。也就是说，多次调用相同的 PUT 请求将始终产生相同的结果。相反，重复调用POST请求具有多次创建相同资源的副作用
- HEAD，HEAD 与 GET 几乎相同，但没有响应主体。换句话说，如果 GET /users 返回用户列表，那么 HEAD /users 将发出相同的请求，但不会返回用户列表。HEAD 请求对于在实际发出 GET 请求之前（例如在下载大文件或响应正文之前）检查 GET 请求将返回的内容很有用
- DELETE，删除指定的资源
- PATCH
- OPTIONS，描述目标资源的通信选项

最常用的两种方法是：GET 和 POST

## 比较 GET 与 POST

|                  |                                                   GET                                                    |                                       POST                                        |
|:----------------:|:--------------------------------------------------------------------------------------------------------:|:---------------------------------------------------------------------------------:|
|  后退按钮/刷新   |                                                   无害                                                   |               数据会被重新提交（浏览器应该告知用户数据会被重新提交）                |
|       书签       |                                               可收藏为书签                                               |                                  不可收藏为书签                                   |
|       缓存       |                                                 能被缓存                                                 |                                     不能缓存                                      |
|     编码类型     |                                    application/x-www-form-urlencoded                                     | application/x-www-form-urlencoded 或 multipart/form-data。为二进制数据使用多重编码 |
|       历史       |                                         参数保留在浏览器历史中。                                          |                            参数不会保存在浏览器历史中                             |
| 对数据长度的限制 |       是的。当发送数据时，GET 方法向 URL 添加数据；URL 的长度是受限制的（URL 的最大长度是 2048 个字符）       |                                      无限制                                       |
| 对数据类型的限制 |                                            只允许 ASCII 字符                                             |                             没有限制。也允许二进制数据                             |
|      安全性      | 与 POST 相比，GET 的安全性较差，因为所发送的数据是 URL 的一部分。在发送密码或其他敏感信息时绝不要使用 GET ！ |       POST 比 GET 更安全，因为参数不会被保存在浏览器历史或 web 服务器日志中        |
|      可见性      |                                     数据在 URL 中对所有人都是可见的                                      |                               数据不会显示在 URL 中                               |
